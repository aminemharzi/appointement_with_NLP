{% extends 'base.html' %}

{% block head%}


	<title>Login Page Ep. 3</title>
	<!-- Load bootstrap stylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300&display=swap');
        body{
        margin:0;
        font-family:Inter;
        }


        .container1 {
           padding:20px;
           height: 80vh;
          display: grid;
          grid-template-columns: 60% 40%;
          grid-template-rows: 55% 5% 20%;
          grid-template-areas:
            "patient table_patient"
            "titre titre"
            "specialty specialty";
        }
        .row_{
        grid-area: titre;

        }
        .container2{
           padding:20px;
           height: 60vh;
          display: grid;
          grid-template-columns: 50% 50%;


        }

        .row_1 {

            grid-area: patient;
            padding: 10px;

        }
        .row_2 {
        padding:20px;
        grid-area: table_patient;


        }
        .row_3 {

         padding-top:30px;
         grid-area: specialty;
          display: flex;
          flex-wrap: nowrap;
         justify-content: space-around;


        }

        .row_4 {

         grid-area: rdv;


        }
        .row_3 > div {
        padding-top:15px;

          width: 200px;
          height:150px;
          text-align: center;
          border: 2px solid white;
          border-radius: 10px;
          transition: all .3s ease;
          color:white;
        }
        .row_3 h3{
        color: #777A95;
        }
        textarea {
          width: 70%;
          height: 150px;
          padding: 12px 20px;
          box-sizing: border-box;
          background: #F7F8F9;
          /* Border */
          border: 1px solid #E8ECF4;
          border-radius: 8px;
          font-size: 16px;
          font-family:Inter;
          color: #000000;
          resize: none;
          outline: none;

        }
        .spec1{
            padding:10px;
             white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;


        }
        .spec1:nth-child(1){
            background: #9E366B;

        }
        .spec1:nth-child(2){
           background: #5554DB;

        }
        .spec1:nth-child(3){
            background: #FFA873;

        }
        .spec1:nth-child(4){
            background: #A079EC;

        }
        .spec1:nth-child(5){
            background: rgba(10, 9, 9, 0.56);

        }
        .spec1:nth-child(6){
            background: #05225A;

        }
        .selection{
            margin-top:50px;


        }

        .selection input{
            border: 1px solid #E8ECF4;

              font-size: 16px;
              font-family:Inter;
              color: #000000;
              resize: none;
              outline: none;

             outline: none;
             width: 300px;
             height:40px;

        }
         .scrollable-container {
          width: 300px; /* Set the desired width */
          height:160px; /* Set the desired height */
          overflow: auto; /* Enable scrolling */
        }
        .scrollable-container a{

            color: white;
        }

        .scrollable-content {
          /* Set the content size if needed */
          /* For example: width: 1000px; height: 500px; */
        }
        .scrollable-container::-webkit-scrollbar {
          width: 8px; /* Set the width of the scrollbar */
        }

        .scrollable-container::-webkit-scrollbar-track {
          background-color: #f1f1f1; /* Set the color of the scrollbar track */
        }

        /* Styling the scrollbar thumb */
        .scrollable-container::-webkit-scrollbar-thumb {
          background-color: #888; /* Set the color of the scrollbar thumb */
        }

        .scrollable-container::-webkit-scrollbar-thumb:hover {
          background-color: #555; /* Set the color of the scrollbar thumb on hover */
        }
        .scrollable-content>li {
          /* Define your styles here */
          list-style-type: none;
          font-size: 16px;
          color: #333;
          background: #F7F8F9;
          padding: 10px;

        }

        .scrollable-content>li:hover {
          /* Styles for when the list item is hovered */
          background-color: #007bff;
          color:white;
        }

        .selected {
          background-color: #f5f5f5;
        }

            #selectedItem {
              margin-top: 10px;
            }
            .calender_day{
        width: 40px;
        height:40px;
        font-family:Inter;

        font-size: 16px;
        background: white;
        border: 1px solid #E8ECF4;
        color: black;

        /* Border */

        border-radius: 50%;
        cursor: pointer;
    }
    .calender_day:hover{
        color: white;
        background: #6F99E9;
        border: 1px solid #E8ECF4;

    }
    .scrollable-content .clicked {
      /* Styles for the first list item */
      font-weight: bold;
      background-color: #007bff;
      color:white;
    }
    .scrollable-content .clicked a{
      /* Styles for the first list item */
      font-weight: bold;
      text-decoration: none;
      background-color: #007bff;
      color:white;
    }
    .scrollable-content>.not_clicked {
      /* Styles for the first list item */


    }
    .scrollable-content>.not_clicked a {
      /* Styles for the first list item */

       text-decoration: none;
      color:black;
    }
    .scrollable-content>.not_clicked:hover {
      /* Styles for the first list item */

       text-decoration: none;
      color:white;
    }
    .scrollable-content>.not_clicked a:hover {
      /* Styles for the first list item */

       text-decoration: none;
      color:white;
    }
    .has_rendezvous{
    background:#007bff;
    color:white;

    }
    #nextButton{
    background-color:rgba(75, 192, 192, 0.6);

    color: #fff;
    border:none;
    border-radius:10px;
    padding:10px;
    min-height:20px;
    font-weight: bold;
    min-width: 100px;
    font-size: 16px;

    }

    #previousButton{
     background-color:#0a0a23;
     font-weight: bold;
    color: #fff;
    border:none;
    border-radius:10px;
    padding:10px;
    min-height:20px;
    min-width: 100px;
    font-size: 16px;

    }





    </style>

{% endblock %}

{% block body%}
    <div class="container1">
        <div class="row_1">
            <h2 id="selectedItem">{{ full_name }}</h2>

                <p>Etat de patient</p>
            {% if description_patient %}
                <textarea readonly>{{ description_patient }}</textarea>
            {% else %}
                <textarea readonly>{{ rendezvous_data[0].description_maladie }}</textarea>
             {% endif %}


        </div>
        <div class="row_2">

            <div class="selection">
                <input type="text" id="searchInput" placeholder="chercher le patient">
                <div class="scrollable-container">
                  <div class="scrollable-content" id="myList">
                      {% for rendezvous in rendezvous_data %}
                            {% if rendezvous.patient_rel.id_patient == id_patient %}
                                <li class="clicked"> <a href="/medcin/{{ rendezvous.patient_rel.id_patient }}" >{{ rendezvous.patient_rel.nom }} {{ rendezvous.patient_rel.prenom }}</a></li>
                            {% else %}
                                <li class="not_clicked"> <a href="/medcin/{{ rendezvous.patient_rel.id_patient }}" >{{ rendezvous.patient_rel.nom }} {{ rendezvous.patient_rel.prenom }}</a></li>
                            {% endif %}
                      {% endfor %}
                    <!-- Content goes here -->
                  </div>
                </div>

            </div>
        </div>
        <div class="row_">
            <h3>Spécialiste</h3>

        </div>
        <div class="row_3">

            {% for index, row in speciality_percent.iterrows() %}
            
            <div class="spec spec1">
                <p><b>{{ row['Label'] }}</b></p>
                <img src="{{ url_for('static', filename='icons/icon.png') }}" class="profile-image" alt="Doctor Profile Image">
                <br><br>
                <p><b>{{ row['Proba'] }}</b></p>
            </div>

            {% endfor %}



        </div>

    </div>
<div class="container2">
            <div class="">
                <div class="calender_table">
            <h1>Jour de rendez vous</h1>
            <h2 id="year_month">{{ month }}-{{ year }}</h2>

            <a href="/medcin/{{ id_patient }}?month={{ prev_month }}&year={{ prev_year }}">Précédente</a>
            <a href="/medcin/{{ id_patient }}?month={{ next_month }}&year={{ next_year }}">Suivante</a>

            <table>
                <tr>
                    <th>Lun</th>
                    <th>Mar</th>
                    <th>Mer</th>
                    <th>Jeu</th>
                    <th>Ven</th>
                    <th>Sam</th>
                    <th>Dim</th>
                </tr>

                {% for week in weeks %}
                    <tr>
                        {% for day in week %}
                            {% if day != "" %}
                                <td>
                                    {% if day.has_rendezvous %}
                                        <button type="button" class="calender_day has_rendezvous" onclick="handleDayClick(this,{{ day.appointments }});" >{{ day.day }}</button>

                                    {% else %}
                                        <button type="button" class="calender_day" >{{ day.day }}</button>
                                    {% endif %}
                                </td>
                            {% else %}
                                <td>{{ day }}</td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </table>
            </div>

            </div>
            <div class="">
                <canvas id="appointmentChart"></canvas>
                <br>
                <center>
                    <button id="previousButton">mois dernier</button>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <button id="nextButton">mois suivant</button>
                </center>





            </div>
        </div>

        <!--Models-->
    <!-- Add the modal markup at the end of the HTML body -->
    <div class="modal" tabindex="-1" role="dialog" id="rendezvousModal">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalTitle">Rendez-vous Details</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- Add elements to display rendez-vous details here -->
            <p id="patientName"></p>
            <p id="time"></p>
            <!-- Add other details as needed -->
          </div>
        </div>
      </div>
    </div>

  <!-- Include Bootstrap JS (optional) -->
        <!-- Include the necessary JavaScript libraries -->

     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Include the necessary JavaScript libraries -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.5.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="{{ url_for('static', filename='js/medcin.js') }}"></script>

{% endblock %}